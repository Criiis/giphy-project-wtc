!function(){const e=e=>{e.preventDefault();const t=e.target.closest(".nav__item"),r=t.dataset.section,n=Array.from(document.querySelectorAll(".nav__item")),i=Array.from(document.querySelectorAll(".section")),s=document.querySelector(`.${r}`),a="nav__item--active",c="section--active";n.forEach((e=>{e.setAttribute("aria-selected",!1),e.classList.remove(a)})),i.forEach((e=>e.classList.remove(c))),t.classList.add(a),t.setAttribute("aria-selected",!0),s.classList.add(c),s.children[0].focus()};function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const r=({title:e,images:t})=>{const r=""===e?"unknown gif":e;return`\n<picture>\n    <source type="image/webp" media="(max-width: 728px)" srcset="${t.preview_webp.url}"/> \n    <source type="image/webp" srcset="${t.original.webp}"/>\n    <source media="(max-width: 728px)" srcset="${t.preview_webp.url}"/>\n    <img src="${t.original.url}" alt="${r}" loading="lazy" />\n</picture>\n`};class n{constructor(){t(this,"fetchingGifData",(async function(e){try{if(!e)throw new Error("Could not fetch data");const t=await Promise.race([s(e),i(15)]);if(0===t.length)throw new Error("Could not find any results");this._resultContainer.classList.remove("error"),t.forEach((e=>this._resultContainer.insertAdjacentHTML("beforeend",((e,t="search-gif-container")=>`\n<div class="${"search-gif-container"===t?t:"trending-gif-container"}__picture-container">${r(e)}</div>`)(e,this._sectionName)))),this._pictureContainer().forEach((async e=>{try{await c(e.querySelectorAll("picture *"),this._pictureParent)}catch(e){console.error(e),l(e,"Image not found",this._pictureParent)}}))}catch(e){console.error(e),l(this._resultContainer,e)}}))}}const i=function(e){return new Promise((function(t,r){setTimeout((function(){r(new Error(`Request took too long! Timeout after ${e} second`))}),1e3*e)}))},s=async e=>{try{const t=await fetch(e);if(!t.ok)throw new Error("Couldn't fetch data, pls try again!");const{data:r}=await t.json();return r}catch(e){throw e}},a=e=>new Promise(((t,r)=>{e.addEventListener("load",(function(){t(this)})),e.addEventListener("error",(function(){r(this)}))})),c=async(e,t)=>{try{return await Promise.all(Array.from(e).map((async e=>{var r;await a(e),null===(r=e.closest(t))||void 0===r||r.classList.add("loaded")})))}catch(e){throw console.error(e),e}},o=(e,t)=>{e.classList.remove("error"),e.innerHTML="",e.insertAdjacentHTML("beforeend",r(t))},l=(e,t,r)=>{(e=r?e.closest(r):e).innerHTML="",e.insertAdjacentHTML("beforeend",`<p class="error">Sorry, ${t}. Try again.</p>`),e.classList.add("error")};var u=new class{_errorHandler(e){if(console.error(e),e.nodeType)return l(e,"Image not found",this._pictureParent);l(this._pictureParentSection(),e.message)}_resetSection(){var e,t;null===(e=this._pictureParentSection())||void 0===e||e.classList.remove("loaded","error"),null===(t=this._pictureSection())||void 0===t||t.remove()}reloadHandler(){this._shuffleCTA.addEventListener("click",(()=>{this._resetSection(),this.controlRandom()}))}constructor(){t(this,"_sectionName","random-gif-container"),t(this,"_pictureParent",`.${this._sectionName}__picture-container`),t(this,"_parentElement",document.querySelector(`section.${this._sectionName}`)),t(this,"_pictureParentSection",(()=>this._parentElement.querySelector(this._pictureParent))),t(this,"_pictureSection",(()=>this._pictureParentSection().querySelector("picture"))),t(this,"_pictureSectionElements",(()=>this._pictureSection().querySelectorAll("*"))),t(this,"_shuffleCTA",this._parentElement.querySelector(`.${this._sectionName}__shuffle-gif`)),t(this,"controlRandom",(async function(){try{const e=await Promise.race([s("https://api.giphy.com/v1/gifs/random?api_key=XSRthheAmTaIEIj4hLXVcyseFf4ME5Aa&lang=en&rating=g"),i(15)]);o(this._pictureParentSection(),e),await c(this._pictureSectionElements(),this._pictureParent)}catch(e){this._errorHandler(e)}}))}};var h=new class extends n{constructor(...e){super(...e),t(this,"_sectionName","search-gif-container"),t(this,"_pictureParent",`.${this._sectionName}__picture-container`),t(this,"_parentElement",document.querySelector(`section.${this._sectionName}`)),t(this,"_formInputSearch",this._parentElement.querySelector(`.${this._sectionName}__search-input`)),t(this,"_formCTASearch",this._parentElement.querySelector(`.${this._sectionName}__search-btn`)),t(this,"_resultContainer",this._parentElement.querySelector(`.${this._sectionName}__results`)),t(this,"_pictureContainer",(()=>Array.from(document.querySelectorAll(this._pictureParent)))),t(this,"searchHandler",(()=>{this._formCTASearch.addEventListener("click",(e=>{e.preventDefault();const t=this._formInputSearch,r=`https://api.giphy.com/v1/gifs/search?api_key=XSRthheAmTaIEIj4hLXVcyseFf4ME5Aa&limit=30&q=${t.value}`;this._resultContainer.innerHTML="",this.fetchingGifData(r),t.value="",t.blur()}))}))}};var _=new class extends n{constructor(...e){super(...e),t(this,"_sectionName","trending-gif-container"),t(this,"_pictureParent",`.${this._sectionName}__picture-container`),t(this,"_parentElement",document.querySelector(`section.${this._sectionName}`)),t(this,"_resultContainer",this._parentElement.querySelector(`.${this._sectionName}__results`)),t(this,"_pictureContainer",(()=>Array.from(document.querySelectorAll(this._pictureParent))))}};const m=document.querySelector(".nav");u.controlRandom(),u.reloadHandler(),h.searchHandler(),_.fetchingGifData("https://api.giphy.com/v1/gifs/trending?api_key=XSRthheAmTaIEIj4hLXVcyseFf4ME5Aa&lang=en&rating=g&limit=10"),m.addEventListener("click",e)}();
//# sourceMappingURL=index.944baf5e.js.map
